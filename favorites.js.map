{"version":3,"file":"favorites.js","sources":["../src/js/favorites.js"],"sourcesContent":["import {\n    replaceInnerHtmlWithLoader,\n    removeLoaderFromElement,\n} from './loader.js';\nimport yourEnergy from './api/your-energy-api.js';\n\nconst favorites = document.querySelector('.favorites');\n\nconst paginationContainer = document.querySelector('.pagination');\nconst exercisesPerPage = 10;\nlet currentPage = 1;\n\nasync function renderExercisesPage(favoritesList, page = 1) {\n    const startIndex = (page - 1) * exercisesPerPage;\n    const endIndex = startIndex + exercisesPerPage;\n    const currentExercises = favoritesList.slice(startIndex, endIndex);\n\n    if (!currentExercises.length) {\n        favorites.innerHTML =\n            \"<p class='no-favorites'>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>\";\n        return;\n    }\n    try {\n        const retrievedExercises = await yourEnergy.getExercisesByIdList(\n            currentExercises\n        );\n\n        const markup = retrievedExercises\n            .map(\n                exercise => `\n<li class=\"exercise-card\" data-id=${exercise._id}>\n  <div class=\"top-row\">\n    <div class=\"rating\">\n        <p class=\"badge\">WORKOUT</p>\n        <button class=\"delete-btn\" onclick=\"removeExercise('${exercise._id}')\">\n            <svg class=\"trash-icon\" width=\"18\" height=\"18\">\n                <use href=\"./img/icons.svg#icon-trash\"></use>\n            </svg>\n        </button>\n    </div>\n    <button class=\"start\">\n        Start\n        <svg class=\"icon-arrow-right\" width=\"13\" height=\"13\">\n            <use href=\"./img/icons.svg#icon-arrow-right\"></use>\n        </svg>\n    </button>\n  </div>\n  <div class=\"exercise-info\">\n    <svg class=\"arrow-running-icon\" width=\"24\" height=\"24\">\n        <use href=\"./img/icons.svg#icon-running-stick-figure\"></use>\n    </svg>\n    <p class=\"exercise-name\">${exercise.name\n        .split(' ')\n        .slice(0, 2)\n        .join(' ')}</p>\n  </div>\n  <div class=\"details\">\n    <p>Burned calories: <strong>${exercise.burnedCalories}</strong></p>\n    <p>Body part: <strong>${exercise.bodyPart}</strong></p>\n    <p>Target: <strong>${exercise.target}</strong></p>\n  </div>\n</li>`\n            )\n            .join('');\n        // favorites.insertAdjacentHTML('beforeend', markup);\n        favorites.innerHTML = markup;\n    } finally {\n        removeLoaderFromElement(favorites);\n    }\n}\n\nfunction renderPagination(favoritesList) {\n    const pageCount = Math.ceil(favoritesList.length / exercisesPerPage);\n    let paginationMarkup = '';\n\n    for (let i = 1; i <= pageCount; i++) {\n        paginationMarkup += `\n            <button class=\"pagination-button ${\n                i === currentPage ? 'active' : ''\n            }\" data-page=\"${i}\">\n                ${i}\n            </button>\n        `;\n    }\n\n    paginationContainer.innerHTML = paginationMarkup;\n\n    document.querySelectorAll('.pagination-button').forEach(button => {\n        button.addEventListener('click', () => {\n            currentPage = Number(button.dataset.page);\n            renderExercisesPage(favoritesList, currentPage);\n            renderPagination(favoritesList);\n        });\n    });\n}\n\nfunction renderUserListFavorites(listFavorites) {\n    renderExercisesPage(listFavorites, currentPage);\n    renderPagination(listFavorites);\n}\n\nfunction removeExercise(exerciseId) {\n    let favoriteExercises = JSON.parse(localStorage.getItem('favorites'));\n\n    favoriteExercises = favoriteExercises.filter(\n        exercise => exercise._id !== exerciseId\n    );\n\n    localStorage.setItem('favorites', JSON.stringify(favoriteExercises));\n\n    document.querySelector(`.exercise-card[data-id=\"${exerciseId}\"]`).remove();\n}\n\nconst favoriteExercises = JSON.parse(localStorage.getItem('favorites'));\nconsole.log('favoriteExercises', favoriteExercises);\n\nif (favoriteExercises && Array.isArray(favoriteExercises)) {\n    replaceInnerHtmlWithLoader(favorites);\n    renderUserListFavorites(favoriteExercises);\n} else {\n    favorites.innerHTML =\n        \"<p class='no-favorites'>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>\";\n}\n"],"names":["favorites","paginationContainer","exercisesPerPage","currentPage","renderExercisesPage","favoritesList","page","startIndex","endIndex","currentExercises","markup","yourEnergy","exercise","removeLoaderFromElement","renderPagination","pageCount","paginationMarkup","i","button","renderUserListFavorites","listFavorites","favoriteExercises","replaceInnerHtmlWithLoader"],"mappings":"gGAMA,MAAMA,EAAY,SAAS,cAAc,YAAY,EAE/CC,EAAsB,SAAS,cAAc,aAAa,EAC1DC,EAAmB,GACzB,IAAIC,EAAc,EAElB,eAAeC,EAAoBC,EAAeC,EAAO,EAAG,CACxD,MAAMC,GAAcD,EAAO,GAAKJ,EAC1BM,EAAWD,EAAaL,EACxBO,EAAmBJ,EAAc,MAAME,EAAYC,CAAQ,EAEjE,GAAI,CAACC,EAAiB,OAAQ,CAC1BT,EAAU,UACN,4MACJ,MACH,CACD,GAAI,CAKA,MAAMU,GAJqB,MAAMC,EAAW,qBACxCF,CACZ,GAGa,IACGG,GAAY;AAAA,oCACQA,EAAS,GAAG;AAAA;AAAA;AAAA;AAAA,8DAIcA,EAAS,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAiB3CA,EAAS,KAC/B,MAAM,GAAG,EACT,MAAM,EAAG,CAAC,EACV,KAAK,GAAG,CAAC;AAAA;AAAA;AAAA,kCAGgBA,EAAS,cAAc;AAAA,4BAC7BA,EAAS,QAAQ;AAAA,yBACpBA,EAAS,MAAM;AAAA;AAAA,MAG3B,EACA,KAAK,EAAE,EAEZZ,EAAU,UAAYU,CAC9B,QAAc,CACNG,EAAwBb,CAAS,CACpC,CACL,CAEA,SAASc,EAAiBT,EAAe,CACrC,MAAMU,EAAY,KAAK,KAAKV,EAAc,OAASH,CAAgB,EACnE,IAAIc,EAAmB,GAEvB,QAASC,EAAI,EAAGA,GAAKF,EAAWE,IAC5BD,GAAoB;AAAA,+CAEZC,IAAMd,EAAc,SAAW,EAClC,gBAAec,CAAC;AAAA,kBACXA,CAAC;AAAA;AAAA,UAKfhB,EAAoB,UAAYe,EAEhC,SAAS,iBAAiB,oBAAoB,EAAE,QAAQE,GAAU,CAC9DA,EAAO,iBAAiB,QAAS,IAAM,CACnCf,EAAc,OAAOe,EAAO,QAAQ,IAAI,EACxCd,EAAoBC,EAAeF,CAAW,EAC9CW,EAAiBT,CAAa,CAC1C,CAAS,CACT,CAAK,CACL,CAEA,SAASc,EAAwBC,EAAe,CAC5ChB,EAAoBgB,EAAejB,CAAW,EAC9CW,EAAiBM,CAAa,CAClC,CAcA,MAAMC,EAAoB,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,EACtE,QAAQ,IAAI,oBAAqBA,CAAiB,EAE9CA,GAAqB,MAAM,QAAQA,CAAiB,GACpDC,EAA2BtB,CAAS,EACpCmB,EAAwBE,CAAiB,GAEzCrB,EAAU,UACN"}